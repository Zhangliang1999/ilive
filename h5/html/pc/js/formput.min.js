var tempPhoneNum;function fetchDataByQType(g){var a=$(g).attr("qtype");a=parseInt(a);var d=parseInt($(g).attr("isNeed"));var f={};f.needMsgValid=0;f.subValue="";switch(a){case 7:f.dataOrder=$(g).attr("qorder");f.dataValue=$(g).find("input").val();f.dataTitle=$(g).prev().find(".titleQ").text();f.dataModelId=$(g).attr("modelId");if(d==1&&$.trim(f.dataValue)==""){f.retFlag=false;f.msg=$(g).prev().find(".titleQ").html()+"必须填写"}else{f.retFlag=true}break;case 5:f.dataOrder=$(g).attr("qorder");f.dataValue=$(g).find("input").val();f.dataTitle=$(g).prev().find(".titleQ").text();f.dataModelId=$(g).attr("modelId");if(d==1&&$.trim(f.dataValue)==""){f.retFlag=false;f.msg=$(g).prev().find(".titleQ").html()+"必须填写"}else{f.retFlag=true}break;case 6:f.dataOrder=$(g).attr("qorder");f.dataValue=$(g).find("textarea").val();f.dataTitle=$(g).prev().find(".titleQ").text();f.dataModelId=$(g).attr("modelId");if(d==1&&$.trim(f.dataValue)==""){f.retFlag=false;f.msg=$(g).prev().find(".titleQ").html()+"必须填写"}else{f.retFlag=true}break;case 8:f.dataOrder=$(g).attr("qorder");var c=$(g).find(".mui-radio input[type=radio]:checked");var e=c.prev().html();f.dataValue=e;f.dataTitle=$(g).prev().find(".titleQ").text();f.dataModelId=$(g).attr("modelId");if(d==1&&$.trim(f.dataValue)==""){f.retFlag=false;f.msg=$(g).prev().find(".titleQ").html()+"必须填写"}else{f.retFlag=true}break;case 20:f.dataOrder=$(g).attr("qorder");f.dataValue=$(g).find("button").text();f.dataTitle=$(g).prev().find(".titleQ").text();f.dataModelId=$(g).attr("modelId");if(d==1&&$.trim(f.dataValue)==""){f.retFlag=false;f.msg=$(g).prev().find(".titleQ").html()+"必须填写"}else{f.retFlag=true}break;case 12:f.dataOrder=$(g).attr("qorder");f.dataValue=$(g).find("button").text();f.dataTitle=$(g).prev().find(".titleQ").text();f.dataModelId=$(g).attr("modelId");if(d==1&&$.trim(f.dataValue)==""){f.retFlag=false;f.msg=$(g).prev().find(".titleQ").html()+"必须填写"}else{f.retFlag=true}break;case 10:f.dataOrder=$(g).attr("qorder");f.dataValue=$(g).find("input").val();f.dataTitle=$(g).prev().find(".titleQ").text();f.dataModelId=$(g).attr("modelId");if(d==1&&$.trim(f.dataValue)==""){f.retFlag=false;f.msg=$(g).prev().find(".titleQ").html()+"必须填写"}else{f.retFlag=true}break;case 11:f.dataOrder=$(g).attr("qorder");f.dataValue=$(g).find("input").val();f.dataTitle=$(g).prev().find(".titleQ").text();f.dataModelId=$(g).attr("modelId");if(d==1&&$.trim(f.dataValue)==""){f.retFlag=false;f.msg=$(g).prev().find(".titleQ").html()+"必须填写"}else{if(d==1&&$.trim(f.dataValue)!=""){if(!isEmail(f.dataValue)){f.retFlag=false;f.msg="邮箱格式不正确"}else{f.retFlag=true}}else{f.retFlag=true}}break;case 1:f.dataOrder=$(g).attr("qorder");var c=$(g).find(".mui-radio input[type=radio]:checked");var e=c.prev().text();f.dataValue=e;f.dataTitle=$(g).prev().find(".titleQ").text();f.dataModelId=$(g).attr("modelId");if(d==1&&$.trim(f.dataValue)==""){f.retFlag=false;f.msg=$(g).prev().find(".titleQ").html()+"必须填写"}else{f.retFlag=true}break;case 2:f.dataOrder=$(g).attr("qorder");var c=$(g).find(".mui-checkbox input[type=checkbox]:checked");var e="";console.log("length:"+c.length);if(c.length>0){c.each(function(i,j){e=e+$(j).prev().text()+","})}f.dataValue=e;f.dataTitle=$(g).prev().find(".titleQ").text();f.dataModelId=$(g).attr("modelId");if(d==1&&$.trim(f.dataValue)==""){f.retFlag=false;f.msg=$(g).prev().find(".titleQ").html()+"必须填写"}else{f.retFlag=true}break;case 27:f.dataOrder=$(g).attr("qorder");f.dataValue=$(g).find("input").val();f.dataTitle=$(g).prev().find(".titleQ").text();f.dataModelId=$(g).attr("modelId");var h=$(g).attr("needMsgValid");tempPhoneNum=f.dataValue;if(d==1&&$.trim(f.dataValue)==""){f.retFlag=false;f.msg=$(g).prev().find(".titleQ").html()+"必须填写"}else{if(d==1&&$.trim(f.dataValue)!=""){var b=$(g).find("input").val();if(!isPoneAvailable(b)){f.retFlag=false;f.msg="手机号格式不正确"}else{f.retFlag=true}}else{if(h==1){f.needMsgValid=1;var b=$(g).find("input").val();if(!isPoneAvailable(b)){f.retFlag=false;f.msg="手机号格式不正确"}else{f.subValue=$("#input_"+f.dataModelId).val();f.retFlag=true;tempPhoneNum=f.subValue}}else{f.retFlag=true}}}console.log("手机号"+tempPhoneNum);break;case 271:f.dataValue=$(g).find("input").val();if(d==1&&$.trim(f.dataValue)==""){f.retFlag=false;f.msg="验证码必须填写"}else{$.ajax({type:"post",url:"http://"+tomcatBase+"/ilive/appuser/getIdentityCode.jspx",dataType:"jsonp",jsonp:"callback",cache:false,async:false,data:{phoneNum:tempPhoneNum,type:"_form",identityCode:f.dataValue},success:function(i){console.log(i);if(i.code==0){f.retFlag=true}else{f.retFlag=false;f.msg=i.msg}}})}break;default:break}return f}function validQType(){var a=$(obj).attr("qtype");a=parseInt(a);var c=parseInt($(obj).attr("isNeed"));var e={};switch(a){case 7:e.dataOrder=$(obj).attr("qorder");e.dataValue=$(obj).find("input").val();e.dataTitle=$(obj).prev().html();e.dataModelId=$(obj).attr("modelId");if(c==1&&$.trim(d)==""){e.retFlag=false;e.msg=dataTitle+"必须填写"}else{e.retFlag=true}break;case 8:e.dataOrder=$(obj).attr("qorder");var b=$(obj).find(".mui-radio input[type=radio]:checked");var d=b.prev().html();e.dataValue=d;e.dataTitle=$(obj).prev().html();e.dataModelId=$(obj).attr("modelId");if(c==1&&$.trim(d)==""){e.retFlag=false;e.msg=dataTitle+"必须填写"}else{e.retFlag=true}break;case 20:e.dataOrder=$(obj).attr("qorder");e.dataValue=$(obj).find("button").text();e.dataTitle=$(obj).prev().html();e.dataModelId=$(obj).attr("modelId");if(c==1&&$.trim(d)==""){e.retFlag=false;e.msg=dataTitle+"必须填写"}else{e.retFlag=true}break;case 12:e.dataOrder=$(obj).attr("qorder");e.dataValue=$(obj).find("button").text();e.dataTitle=$(obj).prev().html();e.dataModelId=$(obj).attr("modelId");if(c==1&&$.trim(d)==""){e.retFlag=false;e.msg=dataTitle+"必须填写"}else{e.retFlag=true}break;case 10:e.dataOrder=$(obj).attr("qorder");e.dataValue=$(obj).find("input").val();e.dataTitle=$(obj).prev().html();e.dataModelId=$(obj).attr("modelId");if(c==1&&$.trim(d)==""){e.retFlag=false;e.msg=dataTitle+"必须填写"}else{e.retFlag=true}break;case 11:e.dataOrder=$(obj).attr("qorder");e.dataValue=$(obj).find("input").val();e.dataTitle=$(obj).prev().html();e.dataModelId=$(obj).attr("modelId");if(c==1&&$.trim(d)==""){e.retFlag=false;e.msg=dataTitle+"必须填写"}else{e.retFlag=true}break;default:break}return e}function getCode(c){var d=$(c).prev(".mui-card").eq(0).attr("modelId");var a=$("#mob_"+d);var b=a.val();if(b==""){alert("手机号必须填写")}else{if(!isPoneAvailable(b.trim())){alert("手机号格式不正确")}else{settime("msgBtn_"+d);$.ajax({url:"http://"+tomcatBase+"/ilive/appuser/sendmsg.jspx",dataType:"jsonp",jsonp:"callback",data:{phoneNum:b.trim(),type:"_form"},dataType:"json",success:function(e){},error:function(){}})}}}function isPoneAvailable(a){var b=/^[1][3,4,5,7,8][0-9]{9}$/;if(!b.test(a)){return false}else{return true}}function isEmail(a){var b=/^([a-zA-Z0-9]+[_|\_|\.]?)*[a-zA-Z0-9]+@([a-zA-Z0-9]+[_|\_|\.]?)*[a-zA-Z0-9]+\.[a-zA-Z]{2,3}$/;if(!b.test(a)){return false}else{return true}}var countdown=120;function settime(b){var a=$("#"+b);if(countdown==0){a.removeAttr("disabled");a.html("获取验证码");countdown=120;return}else{a.attr("disabled",true);a.html("剩余"+countdown+"s");countdown--}setTimeout(function(){settime(b)},1000)};