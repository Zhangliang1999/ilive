var krpanoplugin=function(){function h(a){var c=i?top.orientation:window.orientation;a=a.webkitCompassHeading;var d=!1;void 0===a?window.removeEventListener("deviceorientation",h):(isNaN(a)&&(a=0),a+=c,a!=e&&(e=b.heading,b.heading=a,d=!0),0==b.available&&(b.available=!0,null!=b.onavailability&&j.call(b.onavailability,b),null!=b.onavailable&&j.call(b.onavailable,b)),d&&null!=b.onchange&&j.call(b.onchange,b))}var j=null,b=null,i=!1,e=Number.NaN;this.registerplugin=function(a,d,f){j=a;b=f;if("1.0.8.14">j.version||"2011-03-30">j.build){j.trace(3,"compass plugin - too old krpano version (min. 1.0.8.14)")}else{i=j._have_top_access;if(void 0===i){i=!1;try{top&&top.document&&(i=!0)}catch(c){}}b.registerattribute("available",!1);b.registerattribute("heading",0);b.registerattribute("onavailability",null);b.registerattribute("onavailable",null);b.registerattribute("onchange",null);window.DeviceOrientationEvent&&window.addEventListener("deviceorientation",h)}};this.unloadplugin=function(){window.removeEventListener("deviceorientation",h);j=b=null}};