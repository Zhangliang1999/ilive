var krpanoplugin=function(){function a5(b){return"boolean"==typeof b?b:0<="yesontrue1".indexOf(String(b).toLowerCase())}function ax(e){if(e&&aO&&bl){var b=aO.timertick,g=0;0==a4&&(a4=b);var c=b-a4|0;a4=b;"wheel"==e.type?g=e.deltaY:"mousewheel"==e.type?g=-e.wheelDelta:"DOMMouseScroll"==e.type&&(g=e.detail);g=-g;500<c?a1=1==e.deltaMode||0==g%20?0:1:66>c&&0==a1&&0!=g%40&&6<Math.abs(g)&&(a1=1);e.preventDefault();e.stopPropagation();0!=g&&(0==a1?g=0>g?-5:5:(g/=20,-10>g?g=-10:10<g&&(g=10)),1==aK?a0(g*bk,0):2==aK?a0(0,g*j):3==aK&&a0(0,g*j))}}function aE(m,e,k,h,c){var g=null;c=(!0===c?"remove":"add")+"EventListener";var b=aY.browser.events;if(b.touch&&("down"==e?g=b.touchstart:"move"==e?g=b.touchmove:"up"==e&&(g=b.touchend),aY.ie&&0==b.mouse&&("over"==e?g=b.pointerover?b.pointerover:"MSPointerOver":"out"==e&&(g=b.pointerout?b.pointerout:"MSPointerOut")),g)){m[c](g,k,h)}if(b.mouse&&("down"==e?g="mousedown":"move"==e?g="mousemove":"up"==e?g="mouseup":"over"==e?g="mouseover":"out"==e&&(g="mouseout"),g)){m[c](g,k,h)}}function aQ(){if(aN){var b=aN.sprite.parentNode;b&&(b=b.kobject)&&(b.maskchildren=!0,b.poschanged&&b.updatepluginpos(),aN.poschanged&&aN.updatepluginpos(),a=b,aC=b.pixelwidth,ay=b.pixelheight,isNaN(aC)&&(aC=0),isNaN(ay)&&(ay=0),bh=0<aC||0<ay)}}function bg(){aJ=Number(aN.x);aM=Number(aN.y);isNaN(aT)&&(aJ=0);isNaN(s)&&(aM=0)}function bf(c){c=void 0===c?!1:c;1==(aK&1)?aN.x!=aJ&&(aN.x=aJ,c=!0):aJ=0;2==(aK&2)?aN.y!=aM&&(aN.y=aM,c=!0):aM=0;!bh||aW[0]==aw&&aW[1]==at||(aW[0]=aw,aW[1]=at,c=!0);if(c&&aN&&bh){c=aC-aw;var g=ay-at,e=aJ,b=aM;isNaN(e)&&(e=0);isNaN(b)&&(b=0);e+=c*aI;b+=g*aG;aN.woverflow=-c;aN.hoverflow=-g;aN.loverflow=Math.round((-e+be*c)*bk);aN.roverflow=Math.round((+e-(1-be)*c)*bk);aN.toverflow=Math.round((-b+bd*g)*j);aN.boverflow=Math.round((+b-(1-bd)*g)*j);aN.onscroll&&aO.call(aN.onscroll,aN)}}function i(b){for(;0<f.length&&!(100>=b-f[0].time);){f.shift()}}function bc(){aQ();var b=String(aN.align).toLowerCase();if(""==b||"null"==b){b="lefttop"}j=bk=1;aG=aI=0.5;bd=be=0;0<=b.indexOf("left")&&(aI=be=0,bk=1);0<=b.indexOf("top")&&(aG=bd=0,j=1);0<=b.indexOf("right")&&(be=1,aI=0,bk=-1);0<=b.indexOf("bottom")&&(bd=1,aG=0,j=-1)}function aX(e){bc();f=[];if(0==bb){l=!1}else{aE(window,"up",d,!0);aE(window,"move",aV,!0);var b=aO.stagescale,c=e.changedTouches&&0<e.changedTouches.length?e.changedTouches[0]:e;e=c.pageX/b;b=c.pageY/b;l=!1;aR=e;aH=b;return !1}}function aB(b){(void 0===b.pointerType||4==b.pointerType||"mouse"==b.pointerType)&&av&&(bc(),0!=bh&&(b=ay-at,0>aC-aw||0>b))&&(ba=!0,aE(aN.sprite,"move",o,!0),aE(aN.sprite,"out",aZ,!0))}function o(b){ba&&0==l&&a&&(b=a.getmouse(),aD(b.x/aC*aN.pixelwidth,b.y/ay*aN.pixelheight,!0))}function aZ(b){aE(aN.sprite,"move",o,!0,!0);aE(aN.sprite,"out",aZ,!0,!0);ba=!1}function aV(e){if(0==bb){return l=!1}var b=aO.stagescale,c=e.changedTouches&&0<e.changedTouches.length?e.changedTouches[0]:e;e=c.pageX/b;b=c.pageY/b;0==l&&(aK&1&&5<Math.abs(e-aR)||aK&2&&5<Math.abs(b-aH))&&(bj&&(aF=aP=0,bj=!1),null!=aL&&(clearInterval(aL),aL=null),l=!0,ba=!1,aR=e,aH=b,bg(),aT=aJ,s=aM);l&&(c=aO.timertick,i(c),f.push({time:c,x:e,y:b}),aJ=aT+(e-aR)*bk,aM=s+(b-aH)*j,e=-(aw-aC),b=-(at-ay),aJ+=e*aI,aM+=b*aG,c=1/(1+bi*bi),aJ=0<e?aJ-(aJ-e*aI)*c:aJ-(0<aJ?aJ:aJ<e?aJ-e:0)*c,aM=0<b?aM-(aM-b*aG)*c:aM-(0<aM?aM:aM<b?aM-b:0)*c,aJ-=e*aI,aM-=b*aG,bf());return !1}function d(e){aE(window,"up",d,!0,!0);aE(window,"move",aV,!0,!0);if(0==bb){aF=aP=0,l=!1}else{if(l){i(aO.timertick);if(1<f.length){e=f[0];var g=f[f.length-1],c=g.y-e.y,b=(g.time-e.time)*az;aP=(g.x-e.x)/b*bk;aF=c/b*j}else{aF=aP=0}aL=setInterval(a9,1000/60);l=!1}}}function a2(){setTimeout(function(){aQ();bf(!0);null==aL&&(aL=setInterval(a9,1000/60))},100)}function aU(){aN&&(aQ(),bg(),bf(!0))}function a9(){aJ+=aP;aM+=aF;aP*=a8;aF*=a8;var g=0,b=0,c=-(aw-aC),e=-(at-ay);aJ+=c*aI;aM+=e*aG;0<c?g=aJ-c*aI:bj?g=aJ-aS:aJ<c?g=aJ-c:0<aJ&&(g=aJ);0.1>g*g&&(g=0);0<e?b=aM-e*aG:bj?b=aM-au:aM<e?b=aM-e:0<aM&&(b=aM);0.1>b*b&&(b=0);aJ-=c*aI;aM-=e*aG;0==(aK&1)&&(aP=g=0);0==(aK&2)&&(aF=b=0);0!=g&&(g*=-1,aJ+=g*(1-bi),aP=0>=g*aP?aP+g*a7:g*a6,aP*=bi);0!=b&&(b*=-1,aM+=b*(1-bi),aF=0>=b*aF?aF+b*a7:b*a6,aF*=bi);0==g&&0==b&&0.05>Math.sqrt(aP*aP+aF*aF)&&(bj=!1,aF=aP=0,clearInterval(aL),aL=null);bf()}function aD(g,c,b){bc();bg();if(0==bh){setTimeout(function(){aD(g,c,b)},10)}else{g=Number(g);isNaN(g)&&(g=0);c=Number(c);isNaN(c)&&(c=0);var e=aC-aw,h=ay-at;g=be*aw+g*bk;c=bd*at+c*j;g*=-1;c*=-1;g+=aC/2;0<g&&(g=0);g<e&&(g=e);c+=ay/2;0<c&&(c=0);c<h&&(c=h);!0===b?(bj=!0,aS=g,au=c,null==aL&&(aL=setInterval(a9,1000/60))):(e=-(aw-aC),h=-(at-ay),g=0>e?g-e*aI:0,c=0>h?c-h*aG:0,aJ=g,aM=c,bf())}}function aA(b,c){aD(b,c,!0)}function a3(){l&&(aE(window,"up",d,!0,!0),aE(window,"move",aV,!0,!0));null!=aL&&(clearInterval(aL),aL=null);ba=l=!1;f=[];aF=aP=0;bj=!1;bg()}function a0(g,c){bj=!1;g=Number(g);isNaN(g)&&(g=0);c=Number(c);isNaN(c)&&(c=0);bc();bg();if(0!=bh){var b=aC-aw,e=ay-at,h=!1;0>b&&(aJ+=b*aI,0<g&&0>aJ?(h=!0,aP+=g):0>g&&aJ>b&&(h=!0,aP+=g),aJ-=b*aI);0>e&&(aM+=e*aG,0<c&&0>aM?(h=!0,aF+=c):0>c&&aM>e&&(h=!0,aF+=c),aM-=e*aG);h&&null==aL&&(aL=setInterval(a9,1000/60))}}var aO=null,aN=null,aY=null,aK=3,aw=0,at=0,aW=[0,0],bh=!1,a=null,aC=0,ay=0,bj=!1,aS=0,au=0,bk=1,j=1,aI=0,aG=0,be=0,bd=0,bi=1,a8=0.95,a7=0.08,a6=0.15,az=1/15,bb=!0,bl=!0,l=!1,aR=0,aH=0,aJ=0,aM=0,aT=0,s=0,aL=null,f=[],aP=0,aF=0,ba=!1,av=!1;this.registerplugin=function(b,e,c){aO=b;aN=c;"1.19">aO.version?(aO.trace(3,"Scrollarea Plugin - too old krpano version (min. version 1.19)"),aN=aO=null):(aY=aO.device,aN.registerattribute("direction","all",function(g){g=String(g).toLowerCase();aK=0;aK|=1*(0<=g.indexOf("h"));aK|=2*(0<=g.indexOf("v"));aK|=3*(0<=g.indexOf("all"))},function(){return 3==(aK&3)?"all":1==(aK&1)?"h":"v"}),aN.registerattribute("overscroll",bi,function(g){bi=0>g?0:1<g?1:g},function(){return bi}),aN.registerattribute("friction",a8,function(g){a8=Number(g)},function(){return a8}),aN.registerattribute("acceleration",a7,function(g){a7=Number(g)},function(){return a7}),aN.registerattribute("returnacceleration",a6,function(g){a6=Number(g)},function(){return a6}),aN.registerattribute("momentum",az,function(g){az=Number(g)},function(){return az}),aN.registerattribute("onscroll",null),aN.registerattribute("woverflow",0),aN.registerattribute("hoverflow",0),aN.registerattribute("loverflow",0),aN.registerattribute("roverflow",0),aN.registerattribute("toverflow",0),aN.registerattribute("boverflow",0),aN.registerattribute("draggable",!0,function(g){bb=a5(g)},function(){return bb}),aN.registerattribute("mwheel",!0,function(g){bl=a5(g)},function(){return bl}),aN.registerattribute("onhover_autoscrolling",!1,function(g){av=a5(g)},function(){return av}),aN.registerattribute("csshardwareacceleration","auto"),aN.setcenter=aD,aN.scrolltocenter=aA,aN.stopscrolling=a3,aN.scrollby=a0,aN.update=aU,1==a5(aN.csshardwareacceleration)&&(aN.sprite.style[aY.browser.css.transform+"Style"]="preserve-3d"),aN.sprite.addEventListener("DOMMouseScroll",ax,!0),aN.sprite.addEventListener("mousewheel",ax,!0),aN.sprite.addEventListener("wheel",ax,!0),aE(aN.sprite,"down",aX,!0),aE(aN.sprite,"over",aB,!0),aO.set("events["+aN.name+"_scrollarea].keep",!0),aO.set("events["+aN.name+"_scrollarea].onresize",a2))};var a4=0,a1=0;this.onresize=function(g,c){if(!aO){return !1}aw=g;at=c;var e;bj=!1;bc();bg();if(0==bh){e=!1}else{e=aC-aw;var b=ay-at,h=!1;aJ+=e*aI;if(0>e){if(0>aJ||aJ>e){h=!0}}else{0!=aJ&&(h=!0)}aJ-=e*aI;aM+=b*aG;if(0>b){if(0>aM||aM>b){h=!0}}else{0!=aM&&(h=!0)}aM-=b*aG;h&&null==aL&&(aL=setInterval(a9,1000/60));e=h}0==e&&bf(!0);return !1};this.unloadplugin=function(){aO&&aN&&(aO.set("events["+aN.name+"_scrollarea].name",null),null!=aL&&(clearInterval(aL),aL=null),aE(aN.sprite,"down",aX,!0,!0),aE(aN.sprite,"over",aB,!0,!0));aO=aN=null}};