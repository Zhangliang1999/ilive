var krpanoplugin=function(){function y(a){return"boolean"==typeof a?a:0<="yesontrue1".indexOf(String(a).toLowerCase())}function aq(f){if(f&&H&&b){var a=H.timertick,d=0;0==z&&(z=a);var i=a-z|0;z=a;"wheel"==f.type?d=f.deltaY:"mousewheel"==f.type?d=-f.wheelDelta:"DOMMouseScroll"==f.type&&(d=f.detail);d=-d;500<i?A=1==f.deltaMode||0==d%20?0:1:66>i&&0==A&&0!=d%40&&6<Math.abs(d)&&(A=1);f.preventDefault();f.stopPropagation();0!=d&&(0==A?d=0>d?-5:5:(d/=20,-10>d?d=-10:10<d&&(d=10)),1==J?B(d*c,0):2==J?B(0,d*V):3==J&&B(0,d*V))}}function M(d,j,o,f,l){var i=null;l=(!0===l?"remove":"add")+"EventListener";var a=C.browser.events;if(a.touch&&("down"==j?i=a.touchstart:"move"==j?i=a.touchmove:"up"==j&&(i=a.touchend),C.ie&&0==a.mouse&&("over"==j?i=a.pointerover?a.pointerover:"MSPointerOver":"out"==j&&(i=a.pointerout?a.pointerout:"MSPointerOut")),i)){d[l](i,o,f)}if(a.mouse&&("down"==j?i="mousedown":"move"==j?i="mousemove":"up"==j?i="mouseup":"over"==j?i="mouseover":"out"==j&&(i="mouseout"),i)){d[l](i,o,f)}}function ah(){if(ai){var a=ai.sprite.parentNode;a&&(a=a.kobject)&&(a.maskchildren=!0,a.poschanged&&a.updatepluginpos(),ai.poschanged&&ai.updatepluginpos(),Z=a,N=a.pixelwidth,P=a.pixelheight,isNaN(N)&&(N=0),isNaN(P)&&(P=0),h=0<N||0<P)}}function k(){ak=Number(ai.x);aj=Number(ai.y);isNaN(af)&&(ak=0);isNaN(at)&&(aj=0)}function m(i){i=void 0===i?!1:i;1==(J&1)?ai.x!=ak&&(ai.x=ak,i=!0):ak=0;2==(J&2)?ai.y!=aj&&(ai.y=aj,i=!0):aj=0;!h||D[0]==Q&&D[1]==S||(D[0]=Q,D[1]=S,i=!0);if(i&&ai&&h){i=N-Q;var d=P-S,f=ak,a=aj;isNaN(f)&&(f=0);isNaN(a)&&(a=0);f+=i*K;a+=d*L;ai.woverflow=-i;ai.hoverflow=-d;ai.loverflow=Math.round((-f+n*i)*c);ai.roverflow=Math.round((+f-(1-n)*i)*c);ai.toverflow=Math.round((-a+p*d)*V);ai.boverflow=Math.round((+a-(1-p)*d)*V);ai.onscroll&&H.call(ai.onscroll,ai)}}function W(a){for(;0<X.length&&!(100>=a-X[0].time);){X.shift()}}function q(){ah();var a=String(ai.align).toLowerCase();if(""==a||"null"==a){a="lefttop"}V=c=1;L=K=0.5;p=n=0;0<=a.indexOf("left")&&(K=n=0,c=1);0<=a.indexOf("top")&&(L=p=0,V=1);0<=a.indexOf("right")&&(n=1,K=0,c=-1);0<=a.indexOf("bottom")&&(p=1,L=0,V=-1)}function ad(d){q();X=[];if(0==r){U=!1}else{M(window,"up",Y,!0);M(window,"move",ae,!0);var a=H.stagescale,f=d.changedTouches&&0<d.changedTouches.length?d.changedTouches[0]:d;d=f.pageX/a;a=f.pageY/a;U=!1;F=d;al=a;return !1}}function ao(a){(void 0===a.pointerType||4==a.pointerType||"mouse"==a.pointerType)&&ar&&(q(),0!=h&&(a=P-S,0>N-Q||0>a))&&(t=!0,M(ai.sprite,"move",T,!0),M(ai.sprite,"out",ac,!0))}function T(a){t&&0==U&&Z&&(a=Z.getmouse(),an(a.x/N*ai.pixelwidth,a.y/P*ai.pixelheight,!0))}function ac(a){M(ai.sprite,"move",T,!0,!0);M(ai.sprite,"out",ac,!0,!0);t=!1}function ae(d){if(0==r){return U=!1}var a=H.stagescale,f=d.changedTouches&&0<d.changedTouches.length?d.changedTouches[0]:d;d=f.pageX/a;a=f.pageY/a;0==U&&(J&1&&5<Math.abs(d-F)||J&2&&5<Math.abs(a-al))&&(e&&(am=G=0,e=!1),null!=I&&(clearInterval(I),I=null),U=!0,t=!1,F=d,al=a,k(),af=ak,at=aj);U&&(f=H.timertick,W(f),X.push({time:f,x:d,y:a}),ak=af+(d-F)*c,aj=at+(a-al)*V,d=-(Q-N),a=-(S-P),ak+=d*K,aj+=a*L,f=1/(1+g*g),ak=0<d?ak-(ak-d*K)*f:ak-(0<ak?ak:ak<d?ak-d:0)*f,aj=0<a?aj-(aj-a*L)*f:aj-(0<aj?aj:aj<a?aj-a:0)*f,ak-=d*K,aj-=a*L,m());return !1}function Y(f){M(window,"up",Y,!0,!0);M(window,"move",ae,!0,!0);if(0==r){am=G=0,U=!1}else{if(U){W(H.timertick);if(1<X.length){f=X[0];var d=X[X.length-1],i=d.y-f.y,a=(d.time-f.time)*ap;G=(d.x-f.x)/a*c;am=i/a*V}else{am=G=0}I=setInterval(u,1000/60);U=!1}}}function ab(){setTimeout(function(){ah();m(!0);null==I&&(I=setInterval(u,1000/60))},100)}function E(){ai&&(ah(),k(),m(!0))}function u(){ak+=G;aj+=am;G*=v;am*=v;var d=0,a=0,i=-(Q-N),f=-(S-P);ak+=i*K;aj+=f*L;0<i?d=ak-i*K:e?d=ak-ag:ak<i?d=ak-i:0<ak&&(d=ak);0.1>d*d&&(d=0);0<f?a=aj-f*L:e?a=aj-R:aj<f?a=aj-f:0<aj&&(a=aj);0.1>a*a&&(a=0);ak-=i*K;aj-=f*L;0==(J&1)&&(G=d=0);0==(J&2)&&(am=a=0);0!=d&&(d*=-1,ak+=d*(1-g),G=0>=d*G?G+d*w:d*x,G*=g);0!=a&&(a*=-1,aj+=a*(1-g),am=0>=a*am?am+a*w:a*x,am*=g);0==d&&0==a&&0.05>Math.sqrt(G*G+am*am)&&(e=!1,am=G=0,clearInterval(I),I=null);m()}function an(f,j,a){q();k();if(0==h){setTimeout(function(){an(f,j,a)},10)}else{f=Number(f);isNaN(f)&&(f=0);j=Number(j);isNaN(j)&&(j=0);var i=N-Q,d=P-S;f=n*Q+f*c;j=p*S+j*V;f*=-1;j*=-1;f+=N/2;0<f&&(f=0);f<i&&(f=i);j+=P/2;0<j&&(j=0);j<d&&(j=d);!0===a?(e=!0,ag=f,R=j,null==I&&(I=setInterval(u,1000/60))):(i=-(Q-N),d=-(S-P),f=0>i?f-i*K:0,j=0>d?j-d*L:0,ak=f,aj=j,m())}}function O(a,d){an(a,d,!0)}function aa(){U&&(M(window,"up",Y,!0,!0),M(window,"move",ae,!0,!0));null!=I&&(clearInterval(I),I=null);t=U=!1;X=[];am=G=0;e=!1;k()}function B(f,j){e=!1;f=Number(f);isNaN(f)&&(f=0);j=Number(j);isNaN(j)&&(j=0);q();k();if(0!=h){var a=N-Q,i=P-S,d=!1;0>a&&(ak+=a*K,0<f&&0>ak?(d=!0,G+=f):0>f&&ak>a&&(d=!0,G+=f),ak-=a*K);0>i&&(aj+=i*L,0<j&&0>aj?(d=!0,am+=j):0>j&&aj>i&&(d=!0,am+=j),aj-=i*L);d&&null==I&&(I=setInterval(u,1000/60))}}var H=null,ai=null,C=null,J=3,Q=0,S=0,D=[0,0],h=!1,Z=null,N=0,P=0,e=!1,ag=0,R=0,c=1,V=1,K=0,L=0,n=0,p=0,g=1,v=0.95,w=0.08,x=0.15,ap=1/15,r=!0,b=!0,U=!1,F=0,al=0,ak=0,aj=0,af=0,at=0,I=null,X=[],G=0,am=0,t=!1,ar=!1;this.registerplugin=function(a,d,f){H=a;ai=f;"1.19">H.version?(H.trace(3,"Scrollarea Plugin - too old krpano version (min. version 1.19)"),ai=H=null):(C=H.device,ai.registerattribute("direction","all",function(i){i=String(i).toLowerCase();J=0;J|=1*(0<=i.indexOf("h"));J|=2*(0<=i.indexOf("v"));J|=3*(0<=i.indexOf("all"))},function(){return 3==(J&3)?"all":1==(J&1)?"h":"v"}),ai.registerattribute("overscroll",g,function(i){g=0>i?0:1<i?1:i},function(){return g}),ai.registerattribute("friction",v,function(i){v=Number(i)},function(){return v}),ai.registerattribute("acceleration",w,function(i){w=Number(i)},function(){return w}),ai.registerattribute("returnacceleration",x,function(i){x=Number(i)},function(){return x}),ai.registerattribute("momentum",ap,function(i){ap=Number(i)},function(){return ap}),ai.registerattribute("onscroll",null),ai.registerattribute("woverflow",0),ai.registerattribute("hoverflow",0),ai.registerattribute("loverflow",0),ai.registerattribute("roverflow",0),ai.registerattribute("toverflow",0),ai.registerattribute("boverflow",0),ai.registerattribute("draggable",!0,function(i){r=y(i)},function(){return r}),ai.registerattribute("mwheel",!0,function(i){b=y(i)},function(){return b}),ai.registerattribute("onhover_autoscrolling",!1,function(i){ar=y(i)},function(){return ar}),ai.registerattribute("csshardwareacceleration","auto"),ai.setcenter=an,ai.scrolltocenter=O,ai.stopscrolling=aa,ai.scrollby=B,ai.update=E,1==y(ai.csshardwareacceleration)&&(ai.sprite.style[C.browser.css.transform+"Style"]="preserve-3d"),ai.sprite.addEventListener("DOMMouseScroll",aq,!0),ai.sprite.addEventListener("mousewheel",aq,!0),ai.sprite.addEventListener("wheel",aq,!0),M(ai.sprite,"down",ad,!0),M(ai.sprite,"over",ao,!0),H.set("events["+ai.name+"_scrollarea].keep",!0),H.set("events["+ai.name+"_scrollarea].onresize",ab))};var z=0,A=0;this.onresize=function(f,j){if(!H){return !1}Q=f;S=j;var i;e=!1;q();k();if(0==h){i=!1}else{i=N-Q;var a=P-S,d=!1;ak+=i*K;if(0>i){if(0>ak||ak>i){d=!0}}else{0!=ak&&(d=!0)}ak-=i*K;aj+=a*L;if(0>a){if(0>aj||aj>a){d=!0}}else{0!=aj&&(d=!0)}aj-=a*L;d&&null==I&&(I=setInterval(u,1000/60));i=d}0==i&&m(!0);return !1};this.unloadplugin=function(){H&&ai&&(H.set("events["+ai.name+"_scrollarea].name",null),null!=I&&(clearInterval(I),I=null),M(ai.sprite,"down",ad,!0,!0),M(ai.sprite,"over",ao,!0,!0));H=ai=null}};