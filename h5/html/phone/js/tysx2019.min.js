function GetQueryString(e){var n=new RegExp("(^|&)"+e+"=([^&]*)(&|$)"),i=decodeURI(window.location.search.substr(1)).match(n);return null!=i?unescape(i[2]):0}function isWeiXin(){return"micromessenger"==ua.match(/MicroMessenger/i)}function layerOpen(e,n){var i=n||2;layer.open({content:e,skin:"msg",time:i})}function layerConfim(e,n){layer.open({content:e,btn:"确定",yes:function(e){n()}})}function errorfunction(){window.location.href="http://"+h5Base+"/phone/error.html"}function updateConcernStatus(e,n,i){window.event?i.cancelBubble=!0:i.stopPropagation(),0!=userId?$.ajax({type:"GET",url:"http://"+tomcatBase+"/ilive/app/room/enterprise/concern.jspx",dataType:"jsonp",jsonp:"callback",cache:!1,data:{terminalType:"h5",enterpriseId:e,userId:userId,type:n},success:function(i){var s=i.code;if(401==s)setlogin();else if(402==s)setlogin("bindPhone");else if(403==s);else if(1==s)if(0==n){$("#concernStatus").removeClass("yiguanzhu").addClass("guanzhu icon-jia").attr("onclick","updateConcernStatus("+e+",1,event)"),concernTotalTemp-=1;var a=concernTotalTemp;a=setNum(a),$(".smallText").html(a),layerOpen(i.message)}else getConcern(e,function(n){$("#concernStatus").addClass("yiguanzhu ").removeClass("guanzhu icon-jia").attr("onclick","updateConcernStatus("+e+",0,event)"),concernTotalTemp+=1;var i=concernTotalTemp;i=setNum(i),$(".smallText").html(i);var s="";0==n.isImg&&(s="hide");var a='<div class="concernMsg" id="concernMsg">    <div class="heade">'+n.slogan+'</div>        <div class="body">            <img src="'+n.advertisementImg+'" alt="" class="'+s+'">            <div class="custom-desc">'+n.prompt+'</div>        </div>    </div>    <div class="close" id="popclose"></div>',t=layer.open({type:1,content:a,className:"popuo-concernMsg"});$("#popclose").on("click",function(){layer.close(t)})});else layerOpen("关注或取消关注失败")}}):setlogin()}function getConcern(e,n){$.ajax({type:"GET",url:"http://"+tomcatBase+"/ilive/enterprise/enterpriseSetup.jspx",dataType:"jsonp",jsonp:"callback",cache:!1,data:{enterpriseId:e},success:function(e){var i={slogan:"感谢您的关注",prompt:"下载天翼直播app,了解更多直播内容",isImg:1,advertisementImg:"http://zb.tv189.com/images/img-popup.png"};1==e.code&&(i={slogan:e.data.slogan,prompt:e.data.prompt,isImg:1==e.data.isImg?e.data.isImg:0,advertisementImg:null!=e.data.advertisementImg?e.data.advertisementImg:"http://zb.tv189.com/images/img-popup.png"}),n(i)}})}function zbjcompany(e){return!1}function getEnterprise(e){var n=getStore("Clogo");n&&e==n.v.enterpriseId&&getExpireStore("Clogo")?(n=getExpireStore("Clogo"),$(".companyimg").css("background-image","url("+n.img+")")):$.ajax({type:"GET",url:"http://"+tomcatBase+"/ilive/homepage/homepageenterprise.jspx",dataType:"jsonp",jsonp:"callback",cache:!1,data:{enterpriseId:e},success:function(i){n={enterpriseId:e,img:i.data.enterpriseImg||"img/ELOGO.png"},$(".companyimg").css("background-image","url("+n.img+")"),setExpireStore("Clogo",n)}})}function getAuthenticode(e,n){var i=$("input[name=phoneNumber]").val()||$("input[name=phoneNum]").val(),s="reg";if(n&&(s=n),$(e).parents().hasClass("bind")&&(s="bindMobile"),$(e).parents().hasClass("form")&&(s="form"),null==i||!isPoneAvailable(i.trim()))return layerOpen("请输入正确的手机号"),!1;createAPI("http://"+tomcatBase+"/ilive/appuser/sendmsg.jspx",{phoneNum:i,type:s}).then(function(n){var i=n.code;1==i?selectTimer(e,s):layerOpen(n.message)})}function selectTimer(e,n){0==countdown?($(e).removeAttr("disabled"),$(e).text("获取验证码").attr("onclick","getAuthenticode(this , '"+n+"')"),countdown=60):($(e).attr("disabled",!0),$(e).text("重新发送("+countdown+"s)").removeAttr("onclick"),countdown--,setTimeout(function(){selectTimer(e,n)},1e3))}function isPoneAvailable(e){var n=/^[1][3,4,5,7,8,9][0-9]{9}$/;return!!n.test(e)}function isEmail(e){var n=/^([a-zA-Z0-9]+[_|\_|\.]?)*[a-zA-Z0-9]+@([a-zA-Z0-9]+[_|\_|\.]?)*[a-zA-Z0-9]+\.[a-zA-Z]{2,3}$/;return!!n.test(e)}function savePhone(){wchatHackInput();var e=$("input[name=phoneNumber]").val(),n=$("input[name=userId]").val();if(!isPoneAvailable(e.trim()))return layerOpen("请输入正确的手机号"),!1;var i=$("input[name=vpassword]").val();if(null==i||null==i||""==i)return layerOpen("验证码不能为空!"),!1;$.ajax({type:"GET",url:"http://"+tomcatBase+"/ilive/app/personal/bindMobile.jspx",dataType:"jsonp",jsonp:"callback",cache:!1,data:{terminalType:"h5",userId:n,phoneNum:e,vpassword:i},success:function(e){1==e.code?$(".passMask").fadeOut():layerOpen(e.message)}})}function openRoomActivationCode(){var e=$("input[name=codeEwm]").val();if(null==e||null==e||""==e)return layerOpen("激活码不能为空"),!1;var n=$("input[name=fileId]").val();$.ajax({type:"GET",url:"http://"+tomcatBase+"/ilive/app/room/userFCode.jspx",dataType:"jsonp",jsonp:"callback",cache:!1,data:{terminalType:"h5",fileId:n,code:e},success:function(e){var n=e.code;if(1!=n)return layerOpen(e.message),!1;$(".ewmMask").addClass("hide"),$("#ewmDiv").addClass("hide"),window.location.href=window.location.href}})}function openPay(){$(".ewmMask").addClass("hide"),$("#payDiv").removeClass("hide")}function openJhm(){$(".ewmMask").addClass("hide"),$("#jhmDiv").removeClass("hide")}function wechatSweepUnifyTheOrder(e,n,i,s){var a=$("input[name=roomId]").val(),t=$("input[name=userId]").val(),o=window.navigator.appName;$.ajax({type:"GET",url:"http://"+tomcatBase+"/ilive/wx/sweep/order.jspx",dataType:"jsonp",jsonp:"callback",cache:!1,data:{terminalType:"h5",productDesc:encodeURI(n),totalAmount:i,userId:t,orderType:e,terminalOrderType:o,roomId:a,contentId:s},success:function(e){var n=e.code;if(1==n){var i=e.codeUrl;$("#ewmImage").qrcode({render:"canvas",width:276,height:250,text:i,typeNumber:-1,correctLevel:2,background:"#ffffff",foreground:"#000000"}),$(".ewmMask").addClass("hide"),$("#ewmDiv").removeClass("hide");var s=e.orderId;selectOrder(s)}else layerOpen(e.message)}})}function selectOrder(e){$.ajax({type:"GET",url:"http://"+tomcatBase+"/ilive/wx/select/getOrderId.jspx",dataType:"jsonp",jsonp:"callback",cache:!1,data:{terminalType:"h5",orderId:e},success:function(n){var i=n.code;if(console.log(n),1==i){var s=n.payStatus;if(0==s){$("#ewmImage").html(""),$(".ewmMask").addClass("hide"),$("#ewmDiv").addClass("hide");var a=n.orderType;1==a||2==a||(3==a?(console.log(a),window.location.href=window.location.href):4==a&&console.log(a))}else setTimeout(function(){selectOrder(e)},1e3)}else console.log(n.message)}})}function setNum(e){return e>9999&&(e=(e/1e4).toFixed(1)/1+"w"),e}function checkPhone(){var e=navigator.userAgent,n=e.indexOf("Android")>-1||e.indexOf("Adr")>-1;return n}function isObject(e){return null!==e&&"object"==typeof e}function setExpireStore(e,n,i){i=36e5,setStore(e,{v:n,t:(new Date).getTime()+i})}function getExpireStore(e){var n=getStore(e);return n.t>(new Date).getTime()&&n.v}function setStore(e,n,i){i="localStorage",isObject(n)?window[i].setItem(e,JSON.stringify(n)):window[i].setItem(e,n)}function getStore(e,n){n="localStorage";var i=window[n].getItem(e);try{return JSON.parse(i)}catch(e){return i}}function videoPlay(){if($(".videoPlay").find("i").hasClass("hide"))return!1;myPlayer.paused?($(".videoPlay").addClass("hide"),landscapeVideoClick(),myPlayer.play()):($(".videoPlay").removeClass("hide"),myPlayer.pause())}function landscapeVideoClick(){$(document.body).hasClass("landscape")&&null!=myPlayer&&myPlayer.ready(function(){if(this.isFullscreen())this.paused()&&setTimeout(function(){$(".vjs-fullscreen-control").click(),$(".vjs-play-control").click()},350);else if(this.paused()){if(!$(".videoPlay").hasClass("hide"))return;setTimeout(function(){$(".vjs-fullscreen-control").click(),$(".vjs-play-control").click()},350)}else $(".mui-switch").removeClass("hide"),setTimeout(function(){$(".vjs-fullscreen-control").click()},350)})}function onResize(){isPortrait()?setTimeout(function(){landscape()},0):setTimeout(function(){portrait()},0)}function isPortrait(){var e=window.orientation;return e||0==e?90==e||-90==e:$(window).width()>$(window).height()}function landscape(){$("body").attr("class","landscape"),orientation="landscape",setTimeout(function(){},350),landscapeVideoClick()}function portrait(){$("body").attr("class","portrait"),orientation="portrait",setTimeout(function(){},350)}function wchatHackInput(){if(judgeDeviceType.isWeiXin){var e=document.body.scrollTop;setTimeout(function(){document.body.scrollTop=e},0)}}function flyDanmu(e){if(danmuSwitch){var n={msg:e};$("canvas").barrager([n])}}function saveComments(e){if(0!=userId){var n=$(e).data("type"),i=$.trim($("input[name=msgContent]").val());if(""==i.replace("/^s+|s+$/g+","")||null==i)return layerOpen("请输入消息内容"),!1;switch(n){case"review":layer.closeAll(),createAPI("http://"+tomcatBase+"/ilive/app/room/vod/pushcomments.jspx",{userId:userId,fileId:Params.fileId,comments:encodeURI(i)}).then(function(e){if(-1==e.code||0==e.code)layerOpen(e.message);else if(1==e.code){var n=_template.commentDom(e.data);$(".mescroll-empty").length>0&&$(".mescroll-empty").hide();var i=$("#comment").find(".topBox").length;i>0?$("#comment").find(".topBox").eq(i-1).after(n):$("#comment").prepend(n),$("textarea[name=msgContent]").val("")}else layerConfim(e.message,function(){setlogin()})});break;case"theme":const s=$("input[name=commentsMsgId]").val();if(0==s)return layerOpen("请选择评论话题"),!1;layer.closeAll(),createAPI("http://"+tomcatBase+"/ilive/saveComments.jspx",{userId:userId,msgId:s,comments:encodeURI(i)}).then(function(e){if(1==e.code){var n=JSON.parse(e.comments),i='<div class="pinlun"><span class="plname">'+n.commentsName+"</span>"+n.comments+"</div>\n";$("#msgId_"+n.msgId).find(".themeFooter").removeClass("hide").find(".themeFooter-center").removeClass("hide").prepend(i)}else layerOpen(e.message)});break;default:const a=$(".wen").attr("msgValue");2==a||3==a?($(e).attr("disabled",!0),createAPI("http://"+tomcatBase+"/ilive/sendMessage.jspx",{userId:userId,roomId:Params.roomId,liveMsgType:a,content:encodeURI(i),liveEventId:liveEventId,msgType:1}).then(function(e){1==e.code?(layer.closeAll(),$(".wen").attr("msgValue","2"),$("input[name=msgContent]").val(""),$(".commentBox").scrollTop(0)):layerOpen(e.message)})):layerOpen("发送消息类型错误")}}else setlogin()}function popup(e){e.id=e.id||0;var n=layer.open({type:1,title:e.title,className:"CB",content:showPopupContent(e),anim:"up",shadeClose:!1,style:" height:"+_height+"px; "});$(".layui-m-layershade").css("display","none"),$(".CB h3").on("click",function(){layer.close(n),popupDisable=!1})}function showPopupContent(e){var n='<div class="showPopupContent">';return"review"==e.id?n+='<div class="body mescroll" style="" id="mescroll_'+e.id+'">'+e.content+"</div>":n+='<div class="body" style="height:100%" id="mescroll_'+e.id+'">'+e.content+"</div>",n+="</div>",n}function chatiptOpen(e){if(0==userId)return setlogin(),!1;layer.open({type:1,className:"CB",content:_template.talkCon(e),anim:"up"}),A_Emoji($(".box")),allinput(),$(".textarea").focus().on("input propertychange",function(){0!=$(".textarea").val().length?$(".sendMessage").removeAttr("disabled").css("background","#0084ff"):$(".sendMessage").css("background","#b2daff")}),$(".talkCon .wen").on("click",function(){3==$(this).attr("msgValue")?($(this).css({background:"url(img/graywen.png) no-repeat","background-size":"100% 100%"}),$(this).attr("msgValue","2")):($(this).css({background:"url(img/question.png) no-repeat","background-size":"100% 100%"}),$(this).attr("msgValue","3"))}),judgeDeviceType.isIOS&&(document.body.scrollTop=350)}function setlogin(e){_template.popDom(),$(".page").hide();var n=$("#mainContent");if(n.show(),permissionsjump=window.sessionStorage.getItem("permissionsjump"),1==permissionsjump){var i=JSON.parse(window.sessionStorage.getItem("plinfo"));n.find(".permission").show(),n.find(".loginBox").hide(),n.find(".userPhone").html(i.userphone)}switch(e){case"password":n.find(".login").css("display","none"),n.find(".third_login").css("display","none"),n.find(".FCode_passpord").css("display","none"),n.find(".goback").css("display","none"),n.find(".login_passpord").css("display","block"),n.find("#loginUser").data("type","password");break;case"FCode":n.find(".login").css("display","none"),n.find(".third_login").css("display","none"),n.find(".login_passpord").css("display","none"),n.find(".FCode_passpord").css("display","block"),n.find(".goback").css("display","block"),n.find("#loginUser").data("type","FCode");break;case"bindPhone":n.find(".login_passpord").css("display","none"),n.find(".FCode_passpord").css("display","none"),n.find(".goback").css("display","none"),n.find(".login").css("display","block"),n.find(".third_login").css("display","block"),n.find("#loginUser").data("type","bind"),n.find("#spenTimer").attr("onclick","getAuthenticode(this , 'bindMobile')");break;default:n.find(".login_passpord").css("display","none"),n.find(".FCode_passpord").css("display","none"),n.find(".goback").css("display","none"),n.find(".login").css("display","block"),n.find(".third_login").css("display","block"),n.find("#loginUser").data("type","login")}0!=Params.fileId?(url="http://"+tomcatBase+"/ilive/app/room/vod/getVodMsg.jspx",data={fileId:Params.fileId}):(url="http://"+tomcatBase+"/ilive/selectRoom.jspx",data={roomId:Params.roomId}),"bindPhone"!=e?createAPI(url,data).then(function(e){if(1==e.code){var i=JSON.parse(e.iLiveLiveRoom),s=i.liveEvent,a=s.liveTitle,t=s.welcomeMsg;null!=t&&""!=t||(t="欢迎观看"),document.title=a,n.find("#welcomeMsg").text(t),n.find("#roomName").text(a)}}):n.find("#roomName").text("绑定手机号")}function loginUser(e){var n=$("input[name=phoneNumber]").val(),i=$("input[name=password]").val(),s=$("input[name=roomPassword]").val(),a=$("input[name=codeEwm]").val(),t=$(e).data("type");switch($(".page").show(),t){case"login":if(null==n||""==n.replace("s+",""))return layerOpen("登录用户不能为空!"),!1;if(null==i||""==i.replace("s+",""))return layerOpen("验证码不能为空!"),!1;createAPI("http://"+tomcatBase+"/ilive/appuser/reg.jspx",{phoneNum:n,vpassword:i,orginal:1,type:2}).then(function(e){if(1==e.code){if(1==Params.comment)return window.location.href="http://"+h5Base+"/phone/comment.html?roomId="+Params.roomId,!1;$("#mainContent").hide(),clearLoginVale(),$(".page").children().length>0?userId=e.data.userId:init()}else layerOpen(e.message)});break;case"bind":if(null==n||""==n.replace("s+",""))return layerOpen("登录用户不能为空!"),!1;if(null==i||""==i.replace("s+",""))return layerOpen("验证码不能为空!"),!1;createAPI("http://"+tomcatBase+"/ilive/app/personal/bindMobile.jspx",{userId:userId,phoneNum:n,vpassword:i}).then(function(e){1==e.code?($("#mainContent").hide(),clearLoginVale(),$(".page").children().length>0?userId=e.data.userId:init()):layerOpen(e.message)});break;case"password":if(""==s||null==s)return layerOpen("验证密码不能为空"),!1;0!=Params.fileId?createAPI("http://"+tomcatBase+"/ilive/app/room/vod/checkFilePassword.jspx",{fileId:Params.fileId,passWord:s}).then(function(e){if(0==e.code)return layerOpen(e.message),!1;$("#mainContent").hide(),clearLoginVale(),init()}):createAPI("http://"+tomcatBase+"/ilive/app/room/checkRoomPassword.jspx",{roomId:Params.roomId,roomPassword:s}).then(function(e){if(0==e.code)return layerOpen(e.message),!1;$("#mainContent").hide(),clearLoginVale(),init()});break;case"FCode":if(""==a||null==a)return layerOpen("观看码不能为空"),!1;createAPI("http://"+tomcatBase+"/ilive/app/room/userFCode.jspx",{roomId:Params.roomId,fileId:Params.fileId,code:a}).then(function(e){1==e.code?($("#mainContent").hide(),clearLoginVale(),init()):404==e.code?window.location.href="http://"+h5Base+"/phone/permissions2.html?roomId="+Params.roomId:layerOpen("观看码验证失败")})}}function clearLoginVale(){$("input[name=phoneNumber]").val(""),$("input[name=password]").val(""),$("input[name=roomPassword]").val(""),$("input[name=codeEwm]").val("")}function loginSubmit(){layer.open({type:2,shadeClose:!1}),setTimeout(function(){createAPI("http://"+tomcatBase+"/ilive/appuser/getPhoneUrl.jspx",{roomId:Params.roomId,fileId:Params.fileId}).then(function(e){var n=e.code;if(1==n){var i=e.url;window.location.replace(i)}else layerOpen(e.message)})},2e3)}function loginpermissions(){1==permissionsjump&&(window.sessionStorage.setItem("permissionsjump",0),$("#mainContent").hide(),init())}function changes(){window.sessionStorage.removeItem("permissionsjump"),$(".permission").hide(),$(".loginBox").show()}function goback(){var e=$("#mainContent");e.find(".login_passpord").css("display","none"),e.find(".FCode_passpord").css("display","none"),e.find(".goback").css("display","none"),e.find(".login").css("display","block"),e.find(".third_login").css("display","block"),e.find("#loginUser").data("type","login")}function listenKeybord(e){if(judgeDeviceType.isIOS&&(e.addEventListener("focus",function(){console.log("IOS 键盘弹起啦！")},!1),e.addEventListener("blur",function(){wchatHackInput(),console.log("IOS 键盘收起啦！")})),judgeDeviceType.isAndroid){var n=document.documentElement.clientHeight||document.body.clientHeight;window.addEventListener("resize",function(){var e=document.documentElement.clientHeight||document.body.clientHeight;n<e?console.log("Android 键盘收起啦！"):(console.log("Android 键盘弹起啦！"),wchatHackInput()),n=e},!1)}}function allinput(){for(var e=$(".input"),n=0;n<e.length;n++)listenKeybord(e[n])}var _height,concernTotalTemp,Params={},myPlayer=null,userId=0,judgeDeviceType=function(){var e=window.navigator.userAgent.toLocaleLowerCase(),n=/iphone|ipad|ipod/.test(e),i=/android/.test(e),s="micromessenger"==e.match(/MicroMessenger/i);return{isIOS:n,isAndroid:i,isWeiXin:s}}();Params.roomId=GetQueryString("roomId"),Params.fileId=GetQueryString("fileId"),Params.userId=GetQueryString("userId"),Params.comment=GetQueryString("comment"),Params.liveEventId=GetQueryString("liveEventId"),Params.commentsMsgId=GetQueryString("commentsMsgId"),$("input[name=roomId]").val(Params.roomId),$("input[name=userId]").val(Params.userId),$("input[name=fileId]").val(Params.fileId);var countdown=60;$(window).on("orientationchange",function(e){onResize()});var _template={page:function(){var e='<div class="videoBox">\n        <video id="video" controls="controls" preload="auto" playsinline="playsinline"\n               webkit-playsinline="true"  x5-playsinline=""  x5-video-player-fullscreen="true" x5-video-player-type="h5" x5-video-orientation="portrait"  x-webkit-airplay="true" \n               class="video-js vjs-default-skin vjs-big-play-centered gu-media--video" style="object-fit: contain;"></video>\n        <div class="no-ended" id="endLive" style="display: none">\n            <div class="textMask"></div>\n        </div>\n        <div id="playBg"></div>\n        <div class=\'videoPlay\' id="videoPlay" style="display: none">\n            <div class="no-timeing" id="timeStart" style="display: none">\n                <div class="timeone">\n                    <div class="top">\n                       <p id="customContent"></p>\n                       <div>直播倒计时</div>\n                    </div>\n                    <div id="countdown"></div>\n                </div>\n            </div>\n        </div>\n        <div id="iLiveRollingAdvertising" class="marqueeBox"></div>\n        <!--<div id="mui-switch" class="mui-switch hide" onclick="danmu(this)" style="transition-duration: 0.2s">-->\n        <!--<div class="mui-switch-handle" style="transition-duration: 0.2s; transform: translate(0px, 0px);"></div>-->\n        <!--</div>-->\n        <!--<canvas id="canvas" class=""></canvas>-->\n    </div>\n    <div class="main-content">\n        <div class="menuBox">\n            <div class="swiper-container" id="swiperMenu">\n                <ul class="swiper-wrapper"></ul>\n            </div>\n        </div>\n        <div class="contentBox">\n            <div class="swiper-container" id="swiperContent">\n                <div class="swiper-wrapper"></div>\n            </div>\n        </div>\n    </div>';$(".page").append(e)},review_page:function(){var e=' <div class="videoBox">\n        <video id="video" controls preload="metadata" x5-playsinline playsinline webkit-playsinline="true" x-webkit-airplay="allow"\n               class="video-js vjs-default-skin vjs-big-play-centered gu-media--video" style="object-fit: contain;">\n        </video>\n    </div>\n    <div class="main-content">\n        <div class="menuBox">\n            <ul>\n                <li class="liactive zbjj"><span>简介</span></li>\n                <li class="talkLi"><span>评论</span></li>\n            </ul>\n        </div>\n        <div class="contentBox">\n            <div class="mescroll" id="mescroll">\n                <div class="contentBox-all">\n                    <div class="cell showDesc" id="showDesc">\n                        <div class="title ellipsis liveTitle">天翼直播平台</div>\n                        <div class="play-num"><i class="iconfont icon-video"></i><span class="viewNum">0</span>次播放</div>\n                        <div class="links">简介<i class="iconfont icon-youjiantou"></i></div>\n                    </div>\n                    <div class="cell zbjcompany" id="zbjcompany">\n                        <div class="companyimg"></div>\n                        <div class="company">\n                            <div class="small-liveTitle"><span id="companyName">天翼直播平台</span>\n                                <span class="iconfont btn" id="concernStatus" style="display: none"></span>\n                                <span class="zhuye btn iconfont icon-jia1"></span>\n                            </div>\n                            <div class="small-fans" id="concernTotal">粉丝数: <span class="smallText">0</span> 人</div>\n                        </div>\n                        <div class="links" style="display: none">去主页<i class="iconfont icon-youjiantou"></i></div>\n                    </div>\n                    <div class="cell reviewsAll" id="reviewsAll" style="display: none">\n                        <div class="title">相关</div>\n                        <div class="links" id="showAllReview">全部<i class="iconfont icon-youjiantou"></i></div>\n                        <div class="swiper-container" id="reviews">\n                            <div class="swiper-wrapper"></div>\n                        </div>\n                    </div>\n                    <div class="cell fileDoc" id="fileDoc" style="display: none">\n                        <div class="title">文档</div>\n                        <div class="" id="document"></div>\n                    </div>\n                    <div class="cell talkLi" id="talkLi">\n                        <div class="title">评论</div>\n                        <div class="no-comment" id="no_comment"></div>\n                        <div class="comment" id="comment"></div>\n                    </div>\n                </div>\n            </div>\n            <div class="footer">\n                <div class="flexbox">\n                    <div class="flex flex5" id="chatipt">\n                        <div class="chatipt">\n                            <span>聊几句吧~</span>\n                        </div>\n                    </div>\n                    <div class="flex flex" id="dianzan">\n                        <div class="dianzan">\n                            <i class="iconfont icon-xin"></i>\n                            <span class="tag" id="dianzan-tag">0</span>\n                        </div>\n                    </div>\n                    <div class="flex" id="fenxiang">\n                        <div class="fenxiang">\n                            <i class="iconfont icon-fenxiang"></i>\n                        </div>\n                    </div>\n                    <div class="flex" id="wendang" style="display: none">\n                        <div class="">\n                            <i class="iconfont icon-wendang" style="font-size: .4rem"></i>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>';$(".page").append(e)},showDesc:function(e){var n='  <div class="title ellipsis liveTitle" id="liveTitle" style="width: 100%">'+e.liveTitle+'</div>\n                            <div class="play-num"><i class="iconfont icon-video"></i>直播时间：<span class="viewNum">'+e.liveStartTime+'</span>\n                            </div>\n                            <div class="play-peopleNum">\n                                <i class="peopleIcon iconfont icon-mi"><span class="onlineNumberSpan"></span></i>\n                            </div>';$("#showDesc").html(n)},zbjcompany:function(e){var n=OtherJs_CbCount(e.enterpriseId),i=n+e.concernTotal;concernTotalTemp=i,i=setNum(i);var s='<div class="companyimg" style="background-image: url("'+e.enterpriseImg+'")"></div>\n                            <div class="company">\n                                <div class="small-liveTitle"><span id="companyName">'+e.enterpriseName+'</span>\n                                    <span class="iconfont btn" id="concernStatus" style="display: block;"></span>\n                                    <span class="zhuye btn iconfont icon-jia1"></span>\n                                </div>\n                                <div class="small-fans" id="concernTotal">粉丝数: <span class="smallText">'+i+'</span> 人\n                                </div>\n                            </div>\n                            <div class="links" style="display: none">去主页<i class="iconfont icon-youjiantou"></i>\n                            </div>';if($("#zbjcompany").html(s),4==e.certStatus){var a={type:1,className:"guanzhu icon-jia"};0!=e.concernStatus&&(a={type:0,className:"yiguanzhu"}),$("#concernStatus").css("display","block").addClass(a.className).attr("onclick","updateConcernStatus("+e.enterpriseId+","+a.type+",event)")}getEnterprise(e.enterpriseId)},talkCon:function(e){return'<div id="talkCon">\n    <div class="talkCon box">\n        <input type="text"  class="textarea input"  placeholder="聊几句吧" id="saytext" name="msgContent">\n        <div class="talkBottom">\n            <div class="hiddenDiv" style="display: none;"></div>\n            <div class="newhiddenDiv" style="display: none;"></div>\n            <div class="wen " style="display: none;" msgValue="2" ></div>            <div class="biaoqing emotion" data="emoji"></div>\n            <button class="sendMessage" disabled data-type="'+e+'" onclick="saveComments(this)">发送</button>\n            <div class="emojiBox" style="display: none;">\n                <section class="emoji_container"></section>\n            </div>\n        </div>\n    </div>\n</div>'},commentDom:function(e){var n={className:"",topIcon:"",wenIcon:"",wencss:"none"};return 1==e.topFlagNum&&(n.className=" topBox",n.topIcon="stickIcon"),3==e.liveMsgType&&(n.wenIcon="wenIcon"),1==e.replyType&&(n.wencss="blcok"),str='<div class="talkline'+n.className+'" id="msgId_'+e.commentsId+'">\n          <div class="userImg"><img src="'+e.userImg+'"></div>\n          <div class="commentText">\n               <div class="inlineName">\n                   <span class="senderName">'+e.commentsUser+':<i class="'+n.topIcon+'"></i></span>\n                   <span class="createTime">'+e.createTime+'</span>\n               </div>\n             <div class="comment"><i class="'+n.wenIcon+'"></i><span>'+e.comments+'                 <div class="questionanswer" style="display: '+n.wencss+'">                           <div class="arrow-up"></div>                           <div class="questionName">                               <i class="questionIcon"></i>                               <span class="inlineName">'+e.replyName+'</span>                           </div>                           <div class="commentText">'+e.replyContent+"</div>                   </div>               </div>           </div>      </div>"},theme:function(e){var n="",s=e.top,a=!1,t="赞",o=e.praiseMap;for(i in o)o[i].userId==userId&&(a=!0,t="已赞");return n+=' <div class="themeBox" id="msgId_'+e.msgId+'">\n                                <div class="themeImg">\n                                    <img src="'+e.senderImg+'">\n                                </div>\n                                <div class="themebody">\n                                    <div class="themeHeader">\n                                        <div class="inlineName">\n                                            <span class="senderName">'+e.senderName+'</span>\n                                            <i class="hottheme">'+e.senderImage+"</i>\n",s&&(n+='                                        <i class="zdBox">置顶</i>\n'),n+='                                        </div>\n                                    </div>\n                                    <div class="themecontent">\n                                        <div class="themeText">\n                                            '+e.content+"\n                                        </div>\n                                        "+this.themes_img_video(e)+'\n                                        <div class="themeBottom">\n                                            <div class="themeTime" datetime = ""></div>\n                                            <div class="replyIcon">\n                                                <div class="replys">\n                                                    <div class="replys-icon">\n                                                        <div class="messagePraise" onclick="saveILiveMessagePraise(this,'+e.msgId+", "+a+')"><i class="iconfont icon-xin"></i><span>'+t+'</span>\n                                                        </div>\n                                                        <div class="commentsList" onclick="commentsList(this,'+e.msgId+')"><i class="iconfont icon-huifu"></i><span>回复</span>\n                                                        </div>\n                                                    </div>\n                                                </div>\n                                                <div class="reply-more iconfont icon-more" onclick="replyMore(this)"></div>\n                                            </div>\n                                        </div>\n                                        '+this.themes_pinglun(e)+"\n                                    </div>\n                                </div>\n                            </div>",n},themes_img_video:function(e){var n="";if(2==e.msgType||4==e.msgType){var i,s=e.images;switch(s.length){case 1:i="one";break;case 2:i="two";break;case 3:i="three";break;case 4:i="four";break;default:i="all"}n+='<div class="thumb '+i+'">';for(var a=0;a<s.length;a++)n+='<img class="toBig" src="'+s[a]+'"/>';n+="</div>"}else 5!=e.msgType&&3!=e.msgType||(n+='<div class="thumb">\n',n+='<video id="video_'+e.msgId+'" x5-playsinline playsinline webkit-playsinline="true" x-webkit-airplay="allow"  class="video video-js vjs-default-skin vjs-big-play-centered gu-media--video"  controls="controls" preload="auto"></video>',n+="</div>");return n},themes_pinglun:function(e){var n="",i=e.comments.list,s=e.praiseMap,a=null!=i||s.length>0?"":"hide",t=s.length>0?"":"hide",o=null!=i&&i.length>=0?"":"hide";return n+='<div class="themeFooter '+a+' " id="commentsList">\n',n+='<div class="themeFooter-top '+t+'">\n',s.length>0&&(n+='<i class="iconfont icon-xin"></i>',s.forEach(function(e){n+='<span class="dzName">'+e.userName+"</span>"})),n+="</div>",n+='<div class="themeFooter-center '+o+'">\n',null!=i&&i.length>=0&&(i.forEach(function(e,i){var s=i>2?"hide":"";n+=' <div class="pinlun '+s+'"><span class="plname">'+e.commentsName+"</span>"+e.comments+"</div>\n"}),n+="</div>\n",i.length>3&&(n+='<div class="tishi discuss" onclick="selectCommentAll(this)">\n             <i class="iconfont icon-laquo"></i> 查看全部'+i.length+"条评论\n    </div>\n")),n+="   </div>\n",n},reviewsAll:function(e){var n=e.data,i=' <div class="title">'+e.hkmc+'</div>\n                            <div class="links" id="showAllReview">全部<i class="iconfont icon-youjiantou"></i></div>\n                            <div class="swiper-container" id="reviews">\n                                <div class="swiper-wrapper">\n';return n.forEach(function(e){
i+='<div class="swiper-slide">\n  <div class="review-group" onclick="changeVideo('+e.fileId+')">\n    <div class="review-img">\n      <img src="'+e.fileImg+'" alt="">\n      <div class="reviewMask"><span>'+e.fileDuration+'</span></div>\n    </div>\n    <div class="review-title">'+e.fileName+"</div>\n  </div>\n</div>\n"}),i+="</div></div>",i},show_all_review:function(e){var n=[],i=[],s=["公开观看","密码观看","付费观看","白名单观看","登录观看"];return e.forEach(function(e){var a='<div class="reviewList" id="fileId_'+e.fileId+'" onclick="changeVideo('+e.fileId+')" >';switch(a+='   <div class="reviewLeft">',a+='       <img src="'+e.fileImg+'" alt="" />',a+='       <div class="reviewMask">',a+="           <span>"+e.fileDuration+"</span>",a+="       </div>",a+="   </div>",a+='   <div class="reviewRight">',a+='       <div class="reviewRightTop">'+e.fileName+"</div>",a+='       <div class="reviewRightBottom">'+e.createTime+"</div>",a+='       <div class="reviewIcon">',a+='           <div class="reviewIcondiv"><i class="reviewplayIcon iconfont icon-video reviewplay"><span>'+setNum(e.viewNum)+"次</span></i></div>",e.authType){case 1:i="icon-yan";break;case 3:i="icon-qian";break;default:i="icon-mima"}a+='           <div class="reviewIcondiv"><i class="reviewplayIcon iconfont '+i+' gongkai"><span>'+s[e.authType-1]+"</span></i></div>",a+="       </div>",a+="   </div>",a+="</div>",n.push(a)}),n.join("")},tpdom:function(){return'<div class="voteContent" id="vodeContentDiv"></div>'},drawdom:function(){return'<div id="prizrContentDiv"  ></div>'},popDom:function(){if(void 0===window.popDom||!window.popDom){var e='<div class="container" id="mainContent">\n    <div class="main">\n        <div class="header">\n            <div id="welcomeMsg" class="welcomeMsg"></div>\n            <div class="" id="roomName"></div>\n        </div>\n        <div class="loginBox">\n            <div class="login-input-item">\n                <div class="login" style="display: none">                    <div class="inputBox phoneNumber">\n                        <label><span>+86</span></label>\n                        <input type="tel" class="input" placeholder="请输入您的手机号" maxlength="11" name="phoneNumber">\n                    </div>\n                    <div class="inputBox">\n                        <label><span>验证码</span></label>\n                        <input type="tel" class="input"  placeholder="动态密码" maxlength="6" name="password">\n                        <span class="yzmBtn input" onclick="getAuthenticode(this)" id="spenTimer">获取验证码</span>\n                    </div>\n                </div>\n                <div class="login_passpord" style="display: none">                    <div class="inputBox phoneNumber">\n                        <input class="input" type="text" placeholder="请输入您的观看密码" name="roomPassword" maxlength="4">\n                    </div>                </div>                <div class="FCode_passpord" style="display: none">                    <div class="inputBox phoneNumber">\n                        <input class="input" type="text" placeholder="请输入您的观看码" name="codeEwm" maxlength="6">\n                    </div>                </div>            </div>\n            <div class="text-center">\n                <button type="button" class="livebtn" id="loginUser" onclick="loginUser(this)">进入观看</button>\n                <a class="login-input-item third_login" style="display: none" href="javascript:;" onclick="loginSubmit()">手机号免密登录</a>\n            </div>\n            <div class="goback">我有已绑定观看的账户<br><a href="javascript:;" onclick="goback()">去登录</a></div>        </div>\n        <div class="permission" style="display: none;">\n            <div class="welcomeMsg">您即将用以下手机号进行认证观看</div>\n            <div class="edit-phone">\n                <div class="userPhone"></div>\n                <a href="javascript:;" onclick="changes()">修改</a>\n            </div>\n            <div class="text-center loginpermissions">\n                <button type="button" class="livebtn" onclick="loginpermissions()">进入直播</button>\n            </div>\n        </div>\n    </div>\n</div>';$(document.body).append(e),allinput(),window.popDom=!0}},guide:function(){var e='<div class="guide">\n    <div class="guide-box">\n        <span class="guide-num">5</span><span>跳过</span>\n    </div>\n</div';$(document.body).append(e)}};window.changeVideo=function(e){window.location.href="http://"+h5Base+"/phone/review.html?roomId="+Params.roomId+"&fileId="+e},window.onload=function(){$("#fenxiang").on("click",function(){$("#btnIcons").click(),$("#customshade").css("display","block")}),$("#customshade").on("click",function(){$(this).css("display","none")}),$("#dianzan").on("click",function(){$(this).find("i").hasClass("checked")||saveMediaFile()}),$("#wendang").on("click",function(){var e=$(".document").eq(0).data("docid");fileDocDetail(e)})};