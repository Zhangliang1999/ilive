(function(b,a){typeof exports==="object"&&typeof module!=="undefined"?module.exports=a(require("video.js")):typeof define==="function"&&define.amd?define(["video.js"],a):(b.videojsFlash=a(b.videojs))}(this,(function(l){l=l&&l.hasOwnProperty("default")?l["default"]:l;var f="5.4.1";var s="2.1.1";function m(i){i.streamingFormats={"rtmp/mp4":"MP4","rtmp/flv":"FLV"};i.streamFromParts=function(z,A){return z+"&"+A};i.streamToParts=function(C){var B={connection:"",stream:""};if(!C){return B}var A=C.search(/&(?!\w+=)/);var z=void 0;if(A!==-1){z=A+1}else{A=z=C.lastIndexOf("/")+1;if(A===0){A=z=C.length}}B.connection=C.substring(0,A);B.stream=C.substring(z,C.length);return B};i.isStreamingType=function(z){return z in i.streamingFormats};i.RTMP_RE=/^rtmp[set]?:\/\//i;i.isStreamingSrc=function(z){return i.RTMP_RE.test(z)};i.rtmpSourceHandler={};i.rtmpSourceHandler.canPlayType=function(z){if(i.isStreamingType(z)){return"maybe"}return""};i.rtmpSourceHandler.canHandleSource=function(B,z){var A=i.rtmpSourceHandler.canPlayType(B.type);if(A){return A}if(i.isStreamingSrc(B.src)){return"maybe"}return""};i.rtmpSourceHandler.handleSource=function(B,z,A){var C=i.streamToParts(B.src);z.setRtmpConnection(C.connection);z.setRtmpStream(C.stream)};i.registerSourceHandler(i.rtmpSourceHandler);return i}var y=typeof window!=="undefined"?window:typeof global!=="undefined"?global:typeof self!=="undefined"?self:{};var g;if(typeof window!=="undefined"){g=window}else{if(typeof y!=="undefined"){g=y}else{if(typeof self!=="undefined"){g=self}else{g={}}}}var x=g;var p=function(i,z){if(!(i instanceof z)){throw new TypeError("Cannot call a class as a function")}};var k=function(z,i){if(typeof i!=="function"&&i!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof i)}z.prototype=Object.create(i&&i.prototype,{constructor:{value:z,enumerable:false,writable:true,configurable:true}});if(i){Object.setPrototypeOf?Object.setPrototypeOf(z,i):z.__proto__=i}};var j=function(i,z){if(!i){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return z&&(typeof z==="object"||typeof z==="function")?z:i};var u=l.getComponent("Tech");var b=l.dom;var n=l.url;var o=l.createTimeRange;var a=l.mergeOptions;var d=x&&x.navigator||{};var t=function(H){k(O,H);function O(S,T){p(this,O);var U=j(this,H.call(this,S,T));if(S.source){U.ready(function(){this.setSource(S.source)},true)}if(S.startTime){U.ready(function(){this.load();this.play();this.currentTime(S.startTime)},true)}x.videojs=x.videojs||{};x.videojs.Flash=x.videojs.Flash||{};x.videojs.Flash.onReady=O.onReady;x.videojs.Flash.onEvent=O.onEvent;x.videojs.Flash.onError=O.onError;U.on("seeked",function(){this.lastSeekTarget_=undefined});return U}O.prototype.createEl=function K(){var T=this.options_;if(!T.swf){T.swf="https://vjs.zencdn.net/swf/"+f+"/video-js.swf"}var U=T.techId;var W=a({readyFunction:"videojs.Flash.onReady",eventProxyFunction:"videojs.Flash.onEvent",errorEventProxyFunction:"videojs.Flash.onError",autoplay:T.autoplay,preload:T.preload,loop:T.loop,muted:T.muted},T.flashVars);var V=a({wmode:"opaque",bgcolor:"#000000"},T.params);var S=a({id:U,name:U,"class":"vjs-tech"},T.attributes);this.el_=O.embed(T.swf,W,V,S);this.el_.tech=this;return this.el_};O.prototype.play=function P(){if(this.ended()){this.setCurrentTime(0)}this.el_.vjs_play()};O.prototype.pause=function C(){this.el_.vjs_pause()};O.prototype.src=function D(S){if(S===undefined){return this.currentSrc()}return this.setSrc(S)};O.prototype.setSrc=function E(T){var S=this;T=n.getAbsoluteURL(T);this.el_.vjs_src(T);if(this.autoplay()){this.setTimeout(function(){return S.play()},0)}};O.prototype.seeking=function z(){return this.lastSeekTarget_!==undefined};O.prototype.setCurrentTime=function G(T){var S=this.seekable();if(S.length){T=T>S.start(0)?T:S.start(0);T=T<S.end(S.length-1)?T:S.end(S.length-1);this.lastSeekTarget_=T;this.trigger("seeking");this.el_.vjs_setProperty("currentTime",T);H.prototype.setCurrentTime.call(this)}};O.prototype.currentTime=function N(){if(this.seeking()){return this.lastSeekTarget_||0}return this.el_.vjs_getProperty("currentTime")};O.prototype.currentSrc=function R(){if(this.currentSource_){return this.currentSource_.src}return this.el_.vjs_getProperty("currentSrc")};O.prototype.duration=function i(){if(this.readyState()===0){return NaN}var S=this.el_.vjs_getProperty("duration");return S>=0?S:Infinity};O.prototype.load=function F(){this.el_.vjs_load()};O.prototype.poster=function I(){this.el_.vjs_getProperty("poster")};O.prototype.setPoster=function B(){};O.prototype.seekable=function J(){var S=this.duration();if(S===0){return o()}return o(0,S)};O.prototype.buffered=function A(){var S=this.el_.vjs_getProperty("buffered");if(S.length===0){return o()}return o(S[0][0],S[0][1])};O.prototype.supportsFullScreen=function L(){return false};O.prototype.enterFullScreen=function M(){return false};O.prototype.getVideoPlaybackQuality=function Q(){var S=this.el_.vjs_getProperty("getVideoPlaybackQuality");if(x.performance&&typeof x.performance.now==="function"){S.creationTime=x.performance.now()}else{if(x.performance&&x.performance.timing&&typeof x.performance.timing.navigationStart==="number"){S.creationTime=x.Date.now()-x.performance.timing.navigationStart}}return S};return O}(u);var e=["rtmpConnection","rtmpStream","preload","defaultPlaybackRate","playbackRate","autoplay","loop","controls","volume","muted","defaultMuted"];var w=["networkState","readyState","initialTime","startOffsetTime","paused","ended","videoWidth","videoHeight"];var q=t.prototype;function v(i){var z=i.charAt(0).toUpperCase()+i.slice(1);q["set"+z]=function(A){return this.el_.vjs_setProperty(i,A)}}function h(i){q[i]=function(){return this.el_.vjs_getProperty(i)}}for(var r=0;r<e.length;r++){h(e[r]);v(e[r])}for(var c=0;c<w.length;c++){h(w[c])}t.isSupported=function(){if(l.browser.IS_CHROME&&!l.browser.IS_ANDROID||l.browser.IS_SAFARI&&!l.browser.IS_IOS){return true}return t.version()[0]>=10};u.withSourceHandlers(t);t.nativeSourceHandler={};t.nativeSourceHandler.canPlayType=function(i){if(i in t.formats){return"maybe"}return""};t.nativeSourceHandler.canHandleSource=function(B,i){var z=void 0;function A(D){var C=n.getFileExtension(D);if(C){return"video/"+C}return""}if(!B.type){z=A(B.src)}else{z=B.type.replace(/;.*/,"").toLowerCase()}return t.nativeSourceHandler.canPlayType(z)};t.nativeSourceHandler.handleSource=function(A,i,z){i.setSrc(A.src)};t.nativeSourceHandler.dispose=function(){};t.registerSourceHandler(t.nativeSourceHandler);t.formats={"video/flv":"FLV","video/x-flv":"FLV","video/mp4":"MP4","video/m4v":"MP4"};t.onReady=function(z){var A=b.$("#"+z);var i=A&&A.tech;if(i&&i.el()){t.checkReady(i)}};t.checkReady=function(i){if(!i.el()){return}if(i.el().vjs_getProperty){i.triggerReady()}else{this.setTimeout(function(){t.checkReady(i)},50)}};t.onEvent=function(A,z){var i=b.$("#"+A).tech;var B=Array.prototype.slice.call(arguments,2);i.setTimeout(function(){i.trigger(z,B)},1)};t.onError=function(z,A){var i=b.$("#"+z).tech;if(A==="srcnotfound"){return i.error(4)}if(typeof A==="string"){i.error("FLASH: "+A)}else{A.origin="flash";i.error(A)}};t.version=function(){var i="0,0,0";try{i=new x.ActiveXObject("ShockwaveFlash.ShockwaveFlash").GetVariable("$version").replace(/\D+/g,",").match(/^,?(.+),?$/)[1]}catch(A){try{if(d.mimeTypes["application/x-shockwave-flash"].enabledPlugin){i=(d.plugins["Shockwave Flash 2.0"]||d.plugins["Shockwave Flash"]).description.replace(/\D+/g,",").match(/^,?(.+),?$/)[1]}}catch(z){}}return i.split(",")};t.embed=function(z,D,C,i){var A=t.getEmbedCode(z,D,C,i);var B=b.createEl("div",{innerHTML:A}).childNodes[0];return B};t.getEmbedCode=function(C,F,E,z){var A='<object type="application/x-shockwave-flash" ';var i="";var D="";var B="";if(F){Object.getOwnPropertyNames(F).forEach(function(G){i+=G+"="+F[G]+"&amp;"})}E=a({movie:C,flashvars:i,allowScriptAccess:"always",allowNetworking:"all"},E);Object.getOwnPropertyNames(E).forEach(function(G){D+='<param name="'+G+'" value="'+E[G]+'" />'});z=a({data:C,width:"100%",height:"100%"},z);Object.getOwnPropertyNames(z).forEach(function(G){B+=G+'="'+z[G]+'" '});return""+A+B+">"+D+"</object>"};m(t);if(u.getTech("Flash")){l.log.warn("Not using videojs-flash as it appears to already be registered");l.log.warn("videojs-flash should only be used with video.js@6 and above")}else{l.registerTech("Flash",t)}t.VERSION=s;return t})));